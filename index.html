<!DOCTYPE html>
<html lang="es">
  
<head>
  <title>Sistema de gestión de activos: Control de entrada y salida</title>
  <!--El elemento <link> define la relación entre el documento actual y un recurso externo-->
  <link rel="stylesheet" href="css/styles.css">
  <!--Juego de caracteres utilizado-->
  <meta charset="UTF-8">
  <!--Descripción de la página web-->
  <meta name="description" content="Sistema de gestión de activos: Control de entrada y salida">
  <!--Autor de la página-->
  <meta name="author" content="Gabriel Canizales">
  <!--Configuración de la ventana gráfica para que el sitio web se vea bien en todos los dispositivos-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
</head>

<body>
  <h1>Sistema de gestión de activos: Control de entrada y salida</h1>
  <form method="POST" action="registrar_movimiento.php" onsubmit="return validarFormulario()">
  <fieldset>
    <legend>Registro de Movimiento</legend>
    <div>
    <label for="folio">Folio:</label>
    <input type="text" id="folio" name="folio" value="" readonly>
    </div>
    
    <div>
      <label for="tipo">Tipo de Movimiento:</label>
      <select id="tipo" name="tipo">
        <option value="entrada">Entrada</option>
        <option value="salida">Salida</option>
      </select>
    </div>
    <div>
      <label for="fecha">Fecha:</label>
      <input type="date" id="fecha" name="fecha" required>
      <label for="hora">Hora:</label>
      <input type="time" id="hora" name="hora" required>
    </div>
    <div>
  <label for="unidad">Unidad:</label>
  <select id="unidad" name="unidad" onchange="generarFolio()">
    <option value="cdmx-j87">Ciudad de México - Juárez 87</option>
    <option value="cdmx-j222">Ciudad de México - Juárez 222</option>
    <option value="cdmx-ximilpa39">Ciudad de México - Ximilpa 39</option>
    <option value="cdmx-casachata">Ciudad de México - Casa Chata</option>
    <option value="cdmx-nj251">Ciudad de México - Niño Jesús 251</option>
    <option value="golfo-xalapa">Golfo - Xalapa, Veracruz</option>
    <option value="pacificosur-oaxaca">Pacífico Sur - Oaxaca, Oaxaca</option>
    <option value="occidente-espana-1359">Occidente - Av. España 1359, Guadalajara, Jalisco</option>
    <option value="occidente-alemania-1626">Occidente - Av. Alemania 1626, Guadalajara, Jalisco</option>
    <option value="occidente-cidiglo">Occidente - CIDIGLO, Zapopan, Jalisco</option>
    <option value="noreste-monterrey">Noreste - Monterrey, Nuevo León</option>
    <option value="peninsular-parque-cientifico">Peninsular - Parque Científico, Mérida, Yucatán</option>
    <option value="sureste-sancristobal">Sureste - San Cristóbal de las Casas, Chiapas</option>
  </select>
</div>
    
    <div>
      <label for="inventario">Número de inventario:</label>
      <input type="text" id="inventario" name="inventario" required placeholder="Ingrese aquí el número de inventario del activo">
    </div>
    <div>
      <label for="serie">Número de serie:</label>
      <input type="text" id="serie" name="serie" placeholder="Ingrese aquí el número de serie del activo">
    </div>
    <div>
      <label for="descripcion">Descripción:</label>
      <textarea id="descripcion" name="descripcion" rows="3" cols="30" required placeholder="Ingrese aquí la descripción del activo"></textarea>
    </div>

    <div>
      <label for="motivo">Motivo:</label>
      <select id="motivo" name="motivo">
        <option value="mantenimiento">Mantenimiento</option>
        <option value="prestamo">Préstamo</option>
        <option value="traslado">Traslado</option>
        option value="baja">Baja</option>
        <option value="otro">Otro</option>
      </select>
    </div>    
    <div>
      <label for="solicitante">Solicitante:</label>
      <input type="text" id="solicitante" name="solicitante" required placeholder="Ingrese aquí el nombre del personal que hace la solicitud">
    </div>
    <div>
      <label for="area_solicitante">Área de Adscripción:</label>
      <input type="text" id="area_solicitante" name="area_solicitante" required placeholder="Ingrese aquí el área de adscripción del personal solicitante">
    </div>
    <div>
      <label for="receptor">Recibe:</label>
      <input type="text" id="receptor" name="receptor" required placeholder="Ingrese aquí el nombre del personal que recibe">
    </div>
    <div>
      <label for="area_receptor">Área de Adscripción:</label>
      <input type="text" id="area_receptor" name="area_receptor" required placeholder="Ingrese aquí el área de adscripción del personal que recibe">
    </div>
    <div>
      <label for="autorizado_por">Autorizado por:</label>
      <input type="text" id="autorizado_por" name="autorizado_por" required placeholder="Ingrese aquí el nombre del personal que autoriza la entrada o salida del activo">
    </div>
    <div class="form-group">
      <label for="personal_vigilancia">Revisado por:</label>
      <input type="text" class="form-control" id="personal_vigilancia" name="personal_vigilancia" placeholder="Ingrese aquí el nombre del personal de vigilancia">
    </div>

    <div class="form-group">
      <label for="personal_traslado">Trasladado por:</label>
      <input type="text" class="form-control" id="personal_traslado" name="personal_traslado" placeholder="Ingrese aquí el nombre del personal que realiza el traslado">
    </div>
    <div>
      <label for="observaciones">Observaciones:</label>
      <textarea id="observaciones" name="observaciones" rows="3" cols="30" placeholder="Ingrese aquí cualquier observación adicional"></textarea>
    </div>
    <div>
      <input type="submit" value="Registrar Movimiento">
    </div>
  </form>

  <script>
      // Obtén la referencia al campo de texto donde mostrarás el número de folio
const folio = document.getElementById('folio');

// Función que genera el número de folio
function generarFolio() {
  // Obtén la unidad seleccionada en el formulario
  const unidad = document.getElementById('unidad').value;
  
  // Separa la unidad en sus partes (ciudad, calle y número) usando el guion como separador
  const partesUnidad = unidad.split('-');
  
  // Obtiene la ciudad, la calle y el número de la unidad
  const ciudad = partesUnidad[0].toUpperCase();
  const calleNumero = partesUnidad.slice(1).join(' ').toUpperCase();
  
  // Genera un número de folio automático con las iniciales de la unidad, fecha y hora
  const date = new Date();
  const day = date.getDate().toString().padStart(2, '0');
  const month = (date.getMonth() + 1).toString().padStart(2, '0');
  const year = date.getFullYear().toString().substr(-2);
  const hour = date.getHours().toString().padStart(2, '0');
  const minute = date.getMinutes().toString().padStart(2, '0');
  const second = date.getSeconds().toString().padStart(2, '0');
  const numeroFolio = ciudad.substr(0, 4) + calleNumero.substr(0, 5) + day + month + year + hour + minute + second;

  // Actualiza el valor del campo de texto con el número de folio generado
  folio.value = numeroFolio;
}

// Llama a la función para generar el número de folio inicial
generarFolio();

// Agrega un listener al select para que llame a la función cada vez que cambie la unidad seleccionada
document.getElementById('unidad').addEventListener('change', generarFolio);
    
  </script>
  
 
 </body>
  
</html>

